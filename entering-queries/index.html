<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Entering Queries · Jemoii's Blog</title><meta name="description" content="Entering Queries - Jemoii"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://g.hijkl.mn/atom.xml" title="Jemoii's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/jemoii" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Entering Queries</h1><div class="post-info">2014年12月18日</div><div class="post-content"><p>在创建表、导入数据、检索数据之前，有必要先了解一下如何发出查询.</p>
<p>这里是一个简单的命令,向服务器询问其版本号和当前的日期.在<code>mysql&gt;</code>提示后面输入如下所示的内容,然后按<code>Enter</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT VERSION(), CURRENT_DATE;</div><div class="line"></div><div class="line">+———————————+——————————————+</div><div class="line">| VERSION() | CURRENT_DATE |</div><div class="line">+———————————+——————————————+</div><div class="line">| 5.6.17    | 2014-12-17   |</div><div class="line">+———————————+——————————————+</div><div class="line">1 row in set (0.00 sec)</div><div class="line"></div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<p>这个查询说明了一些<code>mysql</code>的相关内容:</p>
<ul>
<li>一条命令包含SQL语句和最后的分号<code>;</code>(在一些情况下分号也是可以省略的)</li>
<li>当你发出一条命令,<code>mysql</code>将其发送给服务器,用来执行和显示结果,然后显示下一个<code>mysql&gt;</code>提示,表明它已经准备好接收新的命令.</li>
<li><code>mysql</code>以表格的形式显示查询结果.第一行包含列的标签,接下来的行包含查询结果.正常情况下,列的标签即从数据库取得的列名.如果你检索的是语句的值而不是一个列的值,<code>mysql</code>会使用语句自身作为列的标签.</li>
<li><code>mysql</code>会显示返回了多少行,查询执行了多长时间,这能给出一个服务器运行的大概情况.但这些值是不精确的,因为它代表的是经过时间而不是CPU运行时间,会受到服务器装载、网络传输等因素的影响.</li>
</ul>
<p>关键字对大小写不敏感,下面这些查询是等价的:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT VERSION(), CURRENT_DATE;</div><div class="line">mysql&gt; select version(), current_date;</div><div class="line">mysql&gt; SeLeCt vErSiOn(), current_DATE;</div></pre></td></tr></table></figure>
<p>这是另外一个查询,它展示了可以使用<code>mysql</code>作为一个简单的计算器:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT SIN(PI()/4), (4+1)\*5;</div><div class="line"></div><div class="line">+—————————————————————+——————————+</div><div class="line">| SIN(PI()/4)         | (4+1)\*5 |</div><div class="line">+—————————————————————+——————————+</div><div class="line">| 0.70710678118654755 | 25       |</div><div class="line">+—————————————————————+——————————+</div></pre></td></tr></table></figure>
<p>你可以在一行输入多条命令,只需在每条命令的结尾加上分号<code>;</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT VERSION(); SELECT NOW();</div><div class="line"></div><div class="line">+———————————+</div><div class="line">| VERSION() |</div><div class="line">+———————————+</div><div class="line">| 5.6.17    |</div><div class="line">+———————————+</div><div class="line"></div><div class="line">+—————————————————————+</div><div class="line">| NOW()               |</div><div class="line">+—————————————————————+</div><div class="line">| 2014-12-18 11:12:00 |</div><div class="line">+—————————————————————+</div></pre></td></tr></table></figure>
<p>一条命令也不需要全部输入在一行,<code>mysql</code>通过查找分号来判断你的输入是否结束,而不是查找输入行的结束符(换句话说,<code>mysql</code>接收空操作,它会接收输入行,直到遇到分号再来执行).</p>
<p>这里是一个多行输入的命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT</div><div class="line"> -&gt; USER()</div><div class="line"> -&gt; ,</div><div class="line"> -&gt; CURRENT_DATE;</div><div class="line"></div><div class="line">+————————————————+——————————————+</div><div class="line">| USER()         | CURRENT_DATE |</div><div class="line">+————————————————+——————————————+</div><div class="line">| root@localhost | 2014-12-18   |</div><div class="line">+————————————————+——————————————+</div></pre></td></tr></table></figure>
<p>在这个例子中,你输入查询的第一行后,注意提示从<code>mysql&gt;</code>变为<code>-&gt;</code>,这表明<code>mysql</code>未接收到一个完整的命令,正在等待进一步输入.提示会给出有价值的反馈.如果你注意到这个反馈,可以很好地利用它.</p>
<p>如果你不想执行你正在输入的命令,通过输入<code>\c</code>来取消:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT</div><div class="line"> -&gt; USER()</div><div class="line"> -&gt; \c</div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<p>这里注意在输入<code>\c</code>后,提示从<code>-&gt;</code>重新变为<code>mysql&gt;</code>,表明<code>mysql</code>正在等待新命令的输入.</p>
<p>下面的表格给出了你可能会看到的提示,和它们所表明的<code>mysql</code>状态:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt;  等待新命令的输入.</div><div class="line">-&gt;      等待多行输入命令时的完整输入.</div><div class="line">&apos;&gt;      等待一个以单引号开始的字符串的完整输入.</div><div class="line">&quot;&gt;      等待一个以双引号开始的字符串的完整输入.</div><div class="line">`&gt;      等待一个以反引号开始的标识符的完整输入.</div><div class="line">/*&gt;     等待一个以/*开始的注释的完整输入.</div></pre></td></tr></table></figure>
<p>当你本不打算多行输入命令时,却出现了<code>-&gt;</code>提示,很有可能是你忘记输入<code>;</code>,输入<code>;</code>,补全命令,让<code>mysql</code>执行它.</p>
<p>MySQL等待一个字符串的完整输入时,会出现<code>&#39;&gt;</code>或<code>&quot;&gt;</code>提示,在MySQL中,字符串由<code>&#39;</code>或<code>&quot;</code>包含,例如:<code>&#39;hello&#39;</code>,<code>&quot;goodbye&quot;</code>,<code>mysql</code>允许你分多行输入一个字符串,当你看到<code>&#39;&gt;</code>或<code>&quot;&gt;</code>提示时,意味着,你使用<code>&#39;</code>或<code>&quot;</code>开始了一个字符串的输入,但还没有输入匹配的引号来结束这个字符串的输入,例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM my_table WHERE name = &apos;Smith AND age &lt; 30;</div><div class="line">&apos;&gt;</div></pre></td></tr></table></figure>
<p>这个时候,可以简单地取消这个命令.但是如果你在这个时候输入<code>\c</code>,<code>mysql</code>会将它作为字符串的一部分而接收.所以,先输入匹配的引号,再输入<code>\c</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM my_table WHERE name = &apos;Smith AND age &lt; 30;</div><div class="line"> &apos;&gt;&apos;\c</div><div class="line">mysql&gt;</div></pre></td></tr></table></figure>
<p>提示重新变为<code>mysql&gt;</code>,等待新命令的输入.</p>
<p><code>`&gt;</code>与<code>&#39;&gt;</code>、<code>&quot;&gt;</code>有类似的作用.</p>
<p>明白提示的含义非常重要,如果你错误地输入一个未闭合的字符串,后面输入的任何内容都会被<code>mysql</code>作为字符串的一部分而忽略,包括<code>QUIT</code>.</p>
<p>####英文原文：</p>
<p><a href="http://dev.mysql.com/doc/refman/5.6/en/entering-queries.html" target="_blank" rel="external">Entering Queries</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/using-creating-database/" class="prev">上一篇</a><a href="/connecting-disconnecting/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2017 <a href="https://g.hijkl.mn">Jemoii</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>