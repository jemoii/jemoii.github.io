<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Selecting Information from a Table · Jemoii's Blog</title><meta name="description" content="Selecting Information from a Table - Jemoii"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://g.hijkl.mn/atom.xml" title="Jemoii's Blog"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/jemoii" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Selecting Information from a Table</h1><div class="post-info">2014年12月18日</div><div class="post-content"><p>使用<code>SELECT</code>从一个表中获取信息,命令的一般形式为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT what_to_select</div><div class="line">FROM which_table</div><div class="line">WHERE conditions_to_satisfy;</div></pre></td></tr></table></figure>
<p><code>what_to_select</code>表明你想看到什么,可以是列的组合,或者<code>*</code>表示所有列;<code>which_table</code>表明你想从哪个表检索数据;<code>WHERE</code>项是可选的,如果存在,<code>conditions_to_satisfy</code>指定一个或多个为了实现检索,行必须满足的条件.</p>
<h4 id="Selecting-All-Data"><a href="#Selecting-All-Data" class="headerlink" title="Selecting All Data"></a>Selecting All Data</h4><p>从表中检索出所有信息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM pet;</div><div class="line">+----------+--------+---------+------+------------+-----------+</div><div class="line">| name     | owner  | species | sex  | birth      | death     |</div><div class="line">+----------+--------+---------+------+------------+-----------+</div><div class="line">| Fluffy   | Harold | cat     | f    | 1993-02-04 | NULL      |</div><div class="line">| Claws    | Gwen   | cat     | m    | 1994-03-17 | NULL      |</div><div class="line">| Buffy    | Harold | dog     | f    | 1989-05-13 | NULL      |</div><div class="line">| Fang     | Benny  | dog     | m    | 1990-08-27 | NULL      |</div><div class="line">| Bowser   | Diane  | dog     | m    | 1979-08-31 | 1995-07-29|</div><div class="line">| Chirpy   | Gwen   | bird    | f    | 1998-09-11 | NULL      |</div><div class="line">| Whistler | Gwen   | bird    | NULL | 1997-12-09 | NULL      |</div><div class="line">| Slim     | Benny  | snake   | m    | 1996-04-29 | NULL      |</div><div class="line">| Puffball | Diane  | hamster | f    | 1999-03-30 | NULL      |</div><div class="line">+----------+--------+---------+------+------------+-----------+</div></pre></td></tr></table></figure>
<p>如果你想回顾整个表,这种形式的<code>SELECT</code>是很有用的,比如在你刚刚向表中导入数据之后.你可能会发现Bowser的出生日期不正确,应该是1989,而不是1979.</p>
<p>至少有两种方法可以修正错误:</p>
<ul>
<li>重新编辑<code>pet.txt</code>,然后使用<code>DELETE</code>清空整个表,<code>LOAD DATA</code>重新导入数据:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mysql&gt; DELETE FROM pet;</div><div class="line">mysql&gt; LOAD DATA LOCAL INFILE ‘pet.txt’ INTO TABLE pet;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>但是这样做的话,你需要重新输入Puffball的记录.</p>
<ul>
<li>可以使用<code>UPDATE</code>修正发生错误的记录:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql&gt; UPDATE pet SET birth = ‘1989-08-31’ WHERE name = ‘Bowser’;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>UPDATE</code>只改变有错误的记录,不需要重新导入数据.</p>
<h4 id="Selecting-Particular-Rows"><a href="#Selecting-Particular-Rows" class="headerlink" title="Selecting Particular Rows"></a>Selecting Particular Rows</h4><p>如果你不想看到整个表的内容,尤其是当表的内容十分庞大时,在这种情况下,在你想看到的信息上指定一些约束条件.</p>
<p>可以只选择表中的特定一行,例如,你想确认一下对Bowser出生日期的更改,像这样选择Bowser的记录:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM pet WHERE name = &apos;Bowser&apos;;</div><div class="line">+--------+-------+---------+------+------------+------------+</div><div class="line">| name   | owner | species | sex  | birth      | death      |</div><div class="line">+--------+-------+---------+------+------------+------------+</div><div class="line">| Bowser | Diane | dog     | m    | 1989-08-31 | 1995-07-29 |</div><div class="line">+--------+-------+---------+------+------------+------------+</div></pre></td></tr></table></figure>
<p>输出确认了年份已经正确地记录为1989,而不是1979.</p>
<p>字符串比较时对大小写不敏感,所以你可以指定<code>name</code>为<code>bowser</code>,<code>BOWSER</code>等等,查询结果是相同的.</p>
<p>你可以对任何列指定条件,不仅仅是<code>name</code>,例如,你想知道那个动物是在1998年后出生的,可以测试<code>birth</code>列:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM pet WHERE birth &gt;= &apos;1998-1-1&apos;;</div><div class="line">+----------+-------+---------+------+------------+-------+</div><div class="line">| name     | owner | species | sex  | birth      | death |</div><div class="line">+----------+-------+---------+------+------------+-------+</div><div class="line">| Chirpy   | Gwen  | bird    | f    | 1998-09-11 | NULL  |</div><div class="line">| Puffball | Diane | hamster | f    | 1999-03-30 | NULL  |</div><div class="line">+----------+-------+---------+------+------------+-------+</div></pre></td></tr></table></figure>
<p>你可以结合约束条件,例如,确定母狗:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM pet WHERE species = &apos;dog&apos; AND sex = &apos;f&apos;;</div><div class="line">+-------+--------+---------+------+------------+-------+</div><div class="line">| name  | owner  | species | sex  | birth      | death |</div><div class="line">+-------+--------+---------+------+------------+-------+</div><div class="line">| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |</div><div class="line">+-------+--------+---------+------+------------+-------+</div></pre></td></tr></table></figure>
<p>这里使用了逻辑运算符<code>AND</code>,还有一个运算符<code>OR</code>,两者可以混合使用.尽管<code>AND</code>比<code>OR</code>拥有更高的优先级,如果你同时使用两个运算符,使用括号来指定条件的分组情况是更好的选择.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT * FROM pet WHERE (species = &apos;cat&apos; AND sex = &apos;m&apos;)</div><div class="line">    -&gt; OR (species = &apos;dog&apos; AND sex = &apos;f&apos;);</div><div class="line">+-------+--------+---------+------+------------+-------+</div><div class="line">| name  | owner  | species | sex  | birth      | death |</div><div class="line">+-------+--------+---------+------+------------+-------+</div><div class="line">| Claws | Gwen   | cat     | m    | 1994-03-17 | NULL  |</div><div class="line">| Buffy | Harold | dog     | f    | 1989-05-13 | NULL  |</div><div class="line">+-------+--------+---------+------+------------+-------+</div></pre></td></tr></table></figure>
<h4 id="Selecting-Particular-Columns"><a href="#Selecting-Particular-Columns" class="headerlink" title="Selecting Particular Columns"></a>Selecting Particular Columns</h4><p>如果你不想看到表的全部列,仅仅需要指出你感兴趣的列,用逗号分隔.例如,你想知道你的宠物是什么时候出生的,选择<code>name</code>和<code>birth</code>两列:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT name, birth FROM pet;</div><div class="line">+----------+------------+</div><div class="line">| name     | birth      |</div><div class="line">+----------+------------+</div><div class="line">| Fluffy   | 1993-02-04 |</div><div class="line">| Claws    | 1994-03-17 |</div><div class="line">| Buffy    | 1989-05-13 |</div><div class="line">| Fang     | 1990-08-27 |</div><div class="line">| Bowser   | 1989-08-31 |</div><div class="line">| Chirpy   | 1998-09-11 |</div><div class="line">| Whistler | 1997-12-09 |</div><div class="line">| Slim     | 1996-04-29 |</div><div class="line">| Puffball | 1999-03-30 |</div><div class="line">+----------+------------+</div></pre></td></tr></table></figure>
<p>为了确定谁拥有宠物,使用这个查询:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT owner FROM pet;</div><div class="line">+--------+</div><div class="line">| owner  |</div><div class="line">+--------+</div><div class="line">| Harold |</div><div class="line">| Gwen   |</div><div class="line">| Harold |</div><div class="line">| Benny  |</div><div class="line">| Diane  |</div><div class="line">| Gwen   |</div><div class="line">| Gwen   |</div><div class="line">| Benny  |</div><div class="line">| Diane  |</div><div class="line">+--------+</div></pre></td></tr></table></figure>
<p>注意到这个查询只是简单地从每个记录中检索<code>owner</code>列,他们中的一部分多次出现,为了最小化输出,通过添加关键字<code>DISTINCT</code>可以只检索每个独一无二的记录一次:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT DISTINCT owner FROM pet;</div><div class="line">+--------+</div><div class="line">| owner  |</div><div class="line">+--------+</div><div class="line">| Benny  |</div><div class="line">| Diane  |</div><div class="line">| Gwen   |</div><div class="line">| Harold |</div><div class="line">+--------+</div></pre></td></tr></table></figure>
<p>你可以使用<code>WHERE</code>来结合行选择和列选择,例如,只得到猫和狗的出生日期:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">mysql&gt; SELECT name, species, birth FROM pet</div><div class="line">    -&gt; WHERE species = &apos;dog&apos; OR species = &apos;cat&apos;;</div><div class="line">+--------+---------+------------+</div><div class="line">| name   | species | birth      |</div><div class="line">+--------+---------+------------+</div><div class="line">| Fluffy | cat     | 1993-02-04 |</div><div class="line">| Claws  | cat     | 1994-03-17 |</div><div class="line">| Buffy  | dog     | 1989-05-13 |</div><div class="line">| Fang   | dog     | 1990-08-27 |</div><div class="line">| Bowser | dog     | 1989-08-31 |</div><div class="line">+--------+---------+------------+</div></pre></td></tr></table></figure>
<h4 id="英文原文："><a href="#英文原文：" class="headerlink" title="英文原文："></a>英文原文：</h4><p><a href="http://dev.mysql.com/doc/refman/5.6/en/selecting-all.html" target="_blank" rel="external">Selecting All Data</a></p>
<p><a href="http://dev.mysql.com/doc/refman/5.6/en/selecting-rows.html" target="_blank" rel="external">Selecting Particular Rows</a></p>
<p><a href="http://dev.mysql.com/doc/refman/5.6/en/selecting-columns.html" target="_blank" rel="external">Selecting Particular Columns</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/blog/date-calculations/" class="prev">上一篇</a><a href="/blog/loading-tables/" class="next">下一篇</a></div><div class="copyright"><p>© 2014 - 2017 <a href="https://g.hijkl.mn">Jemoii</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>